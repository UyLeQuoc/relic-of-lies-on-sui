{
  "id": {
    "address": "contract_v4",
    "name": "gacha"
  },
  "doc": " Gacha module for Relic Of Lies NFT Cards\n Allows players to pull random NFT cards with different rarities",
  "immediate_dependencies": [
    {
      "address": "std",
      "name": "string"
    },
    {
      "address": "std",
      "name": "vector"
    },
    {
      "address": "sui",
      "name": "balance"
    },
    {
      "address": "sui",
      "name": "coin"
    },
    {
      "address": "sui",
      "name": "display"
    },
    {
      "address": "sui",
      "name": "object"
    },
    {
      "address": "sui",
      "name": "package"
    },
    {
      "address": "sui",
      "name": "random"
    },
    {
      "address": "sui",
      "name": "sui"
    },
    {
      "address": "sui",
      "name": "transfer"
    },
    {
      "address": "sui",
      "name": "tx_context"
    }
  ],
  "attributes": [
    {
      "Parameterized": [
        "allow",
        [
          {
            "Name": "unused_const"
          },
          {
            "Parameterized": [
              "lint",
              [
                {
                  "Name": "public_entry"
                }
              ]
            ]
          },
          {
            "Parameterized": [
              "lint",
              [
                {
                  "Name": "public_random"
                }
              ]
            ]
          },
          {
            "Parameterized": [
              "lint",
              [
                {
                  "Name": "self_transfer"
                }
              ]
            ]
          }
        ]
      ]
    }
  ],
  "functions": {
    "init": {
      "source_index": 0,
      "index": 0,
      "doc": null,
      "attributes": [],
      "visibility": "Private",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "otw",
          "type_": {
            "Datatype": {
              "module": {
                "address": "contract_v4",
                "name": "gacha"
              },
              "name": "GACHA",
              "type_arguments": []
            }
          }
        },
        {
          "name": "ctx",
          "type_": {
            "Reference": [
              true,
              {
                "Datatype": {
                  "module": {
                    "address": "sui",
                    "name": "tx_context"
                  },
                  "name": "TxContext",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": []
    },
    "generate_card": {
      "source_index": 1,
      "index": 1,
      "doc": " Generate a random card (internal helper)",
      "attributes": [],
      "visibility": "Private",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "generator",
          "type_": {
            "Reference": [
              true,
              {
                "Datatype": {
                  "module": {
                    "address": "sui",
                    "name": "random"
                  },
                  "name": "RandomGenerator",
                  "type_arguments": []
                }
              }
            ]
          }
        },
        {
          "name": "ctx",
          "type_": {
            "Reference": [
              true,
              {
                "Datatype": {
                  "module": {
                    "address": "sui",
                    "name": "tx_context"
                  },
                  "name": "TxContext",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": [
        {
          "Datatype": {
            "module": {
              "address": "contract_v4",
              "name": "gacha"
            },
            "name": "Card",
            "type_arguments": []
          }
        }
      ]
    },
    "pull": {
      "source_index": 2,
      "index": 2,
      "doc": " Pull multiple random cards from gacha\n Cost: 0.01 SUI per card",
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "treasury",
          "type_": {
            "Reference": [
              true,
              {
                "Datatype": {
                  "module": {
                    "address": "contract_v4",
                    "name": "gacha"
                  },
                  "name": "GachaTreasury",
                  "type_arguments": []
                }
              }
            ]
          }
        },
        {
          "name": "payment",
          "type_": {
            "Datatype": {
              "module": {
                "address": "sui",
                "name": "coin"
              },
              "name": "Coin",
              "type_arguments": [
                {
                  "phantom": true,
                  "argument": {
                    "Datatype": {
                      "module": {
                        "address": "sui",
                        "name": "sui"
                      },
                      "name": "SUI",
                      "type_arguments": []
                    }
                  }
                }
              ]
            }
          }
        },
        {
          "name": "amount",
          "type_": "u64"
        },
        {
          "name": "random",
          "type_": {
            "Reference": [
              false,
              {
                "Datatype": {
                  "module": {
                    "address": "sui",
                    "name": "random"
                  },
                  "name": "Random",
                  "type_arguments": []
                }
              }
            ]
          }
        },
        {
          "name": "ctx",
          "type_": {
            "Reference": [
              true,
              {
                "Datatype": {
                  "module": {
                    "address": "sui",
                    "name": "tx_context"
                  },
                  "name": "TxContext",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": [
        {
          "vector": {
            "Datatype": {
              "module": {
                "address": "contract_v4",
                "name": "gacha"
              },
              "name": "Card",
              "type_arguments": []
            }
          }
        }
      ]
    },
    "pull_and_keep": {
      "source_index": 3,
      "index": 3,
      "doc": " Pull multiple cards and transfer all to sender\n Cost: 0.01 SUI per card",
      "attributes": [],
      "visibility": "Public",
      "entry": true,
      "type_parameters": [],
      "parameters": [
        {
          "name": "treasury",
          "type_": {
            "Reference": [
              true,
              {
                "Datatype": {
                  "module": {
                    "address": "contract_v4",
                    "name": "gacha"
                  },
                  "name": "GachaTreasury",
                  "type_arguments": []
                }
              }
            ]
          }
        },
        {
          "name": "payment",
          "type_": {
            "Datatype": {
              "module": {
                "address": "sui",
                "name": "coin"
              },
              "name": "Coin",
              "type_arguments": [
                {
                  "phantom": true,
                  "argument": {
                    "Datatype": {
                      "module": {
                        "address": "sui",
                        "name": "sui"
                      },
                      "name": "SUI",
                      "type_arguments": []
                    }
                  }
                }
              ]
            }
          }
        },
        {
          "name": "amount",
          "type_": "u64"
        },
        {
          "name": "random",
          "type_": {
            "Reference": [
              false,
              {
                "Datatype": {
                  "module": {
                    "address": "sui",
                    "name": "random"
                  },
                  "name": "Random",
                  "type_arguments": []
                }
              }
            ]
          }
        },
        {
          "name": "ctx",
          "type_": {
            "Reference": [
              true,
              {
                "Datatype": {
                  "module": {
                    "address": "sui",
                    "name": "tx_context"
                  },
                  "name": "TxContext",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": []
    },
    "get_upgrade_rate": {
      "source_index": 4,
      "index": 4,
      "doc": " Get upgrade success rate based on current rarity",
      "attributes": [],
      "visibility": "Private",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "rarity",
          "type_": "u8"
        }
      ],
      "return_": [
        "u64"
      ]
    },
    "upgrade": {
      "source_index": 5,
      "index": 5,
      "doc": " Upgrade 3 cards of the same rarity to attempt getting 1 card of higher rarity\n Success rate depends on rarity: Common→Rare 80%, Rare→Epic 60%, Epic→Legendary 40%, Legendary→Mythic 20%\n On SUCCESS: Returns upgraded card with combined stats\n On FAILURE: Returns 1 card of same rarity with combined stats (2 cards are lost)",
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "card1",
          "type_": {
            "Datatype": {
              "module": {
                "address": "contract_v4",
                "name": "gacha"
              },
              "name": "Card",
              "type_arguments": []
            }
          }
        },
        {
          "name": "card2",
          "type_": {
            "Datatype": {
              "module": {
                "address": "contract_v4",
                "name": "gacha"
              },
              "name": "Card",
              "type_arguments": []
            }
          }
        },
        {
          "name": "card3",
          "type_": {
            "Datatype": {
              "module": {
                "address": "contract_v4",
                "name": "gacha"
              },
              "name": "Card",
              "type_arguments": []
            }
          }
        },
        {
          "name": "random",
          "type_": {
            "Reference": [
              false,
              {
                "Datatype": {
                  "module": {
                    "address": "sui",
                    "name": "random"
                  },
                  "name": "Random",
                  "type_arguments": []
                }
              }
            ]
          }
        },
        {
          "name": "ctx",
          "type_": {
            "Reference": [
              true,
              {
                "Datatype": {
                  "module": {
                    "address": "sui",
                    "name": "tx_context"
                  },
                  "name": "TxContext",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": [
        {
          "Datatype": {
            "module": {
              "address": "contract_v4",
              "name": "gacha"
            },
            "name": "Card",
            "type_arguments": []
          }
        }
      ]
    },
    "upgrade_and_keep": {
      "source_index": 6,
      "index": 6,
      "doc": " Upgrade and transfer to sender\n Returns true if upgrade succeeded, false if failed (still get a card back)",
      "attributes": [],
      "visibility": "Public",
      "entry": true,
      "type_parameters": [],
      "parameters": [
        {
          "name": "card1",
          "type_": {
            "Datatype": {
              "module": {
                "address": "contract_v4",
                "name": "gacha"
              },
              "name": "Card",
              "type_arguments": []
            }
          }
        },
        {
          "name": "card2",
          "type_": {
            "Datatype": {
              "module": {
                "address": "contract_v4",
                "name": "gacha"
              },
              "name": "Card",
              "type_arguments": []
            }
          }
        },
        {
          "name": "card3",
          "type_": {
            "Datatype": {
              "module": {
                "address": "contract_v4",
                "name": "gacha"
              },
              "name": "Card",
              "type_arguments": []
            }
          }
        },
        {
          "name": "random",
          "type_": {
            "Reference": [
              false,
              {
                "Datatype": {
                  "module": {
                    "address": "sui",
                    "name": "random"
                  },
                  "name": "Random",
                  "type_arguments": []
                }
              }
            ]
          }
        },
        {
          "name": "ctx",
          "type_": {
            "Reference": [
              true,
              {
                "Datatype": {
                  "module": {
                    "address": "sui",
                    "name": "tx_context"
                  },
                  "name": "TxContext",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": []
    },
    "record_game": {
      "source_index": 7,
      "index": 7,
      "doc": " Update card stats after a game (called by game module)",
      "attributes": [],
      "visibility": "Package",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "card",
          "type_": {
            "Reference": [
              true,
              {
                "Datatype": {
                  "module": {
                    "address": "contract_v4",
                    "name": "gacha"
                  },
                  "name": "Card",
                  "type_arguments": []
                }
              }
            ]
          }
        },
        {
          "name": "won",
          "type_": "bool"
        }
      ],
      "return_": []
    },
    "card_value": {
      "source_index": 8,
      "index": 8,
      "doc": null,
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "card",
          "type_": {
            "Reference": [
              false,
              {
                "Datatype": {
                  "module": {
                    "address": "contract_v4",
                    "name": "gacha"
                  },
                  "name": "Card",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": [
        "u8"
      ]
    },
    "card_rarity": {
      "source_index": 9,
      "index": 9,
      "doc": null,
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "card",
          "type_": {
            "Reference": [
              false,
              {
                "Datatype": {
                  "module": {
                    "address": "contract_v4",
                    "name": "gacha"
                  },
                  "name": "Card",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": [
        "u8"
      ]
    },
    "card_wins": {
      "source_index": 10,
      "index": 10,
      "doc": null,
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "card",
          "type_": {
            "Reference": [
              false,
              {
                "Datatype": {
                  "module": {
                    "address": "contract_v4",
                    "name": "gacha"
                  },
                  "name": "Card",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": [
        "u64"
      ]
    },
    "card_games_played": {
      "source_index": 11,
      "index": 11,
      "doc": null,
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "card",
          "type_": {
            "Reference": [
              false,
              {
                "Datatype": {
                  "module": {
                    "address": "contract_v4",
                    "name": "gacha"
                  },
                  "name": "Card",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": [
        "u64"
      ]
    },
    "gacha_cost": {
      "source_index": 12,
      "index": 12,
      "doc": null,
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [],
      "return_": [
        "u64"
      ]
    },
    "treasury_balance": {
      "source_index": 13,
      "index": 13,
      "doc": null,
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "treasury",
          "type_": {
            "Reference": [
              false,
              {
                "Datatype": {
                  "module": {
                    "address": "contract_v4",
                    "name": "gacha"
                  },
                  "name": "GachaTreasury",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": [
        "u64"
      ]
    },
    "total_cards_minted": {
      "source_index": 14,
      "index": 14,
      "doc": null,
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "treasury",
          "type_": {
            "Reference": [
              false,
              {
                "Datatype": {
                  "module": {
                    "address": "contract_v4",
                    "name": "gacha"
                  },
                  "name": "GachaTreasury",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": [
        "u64"
      ]
    },
    "rarity_common": {
      "source_index": 15,
      "index": 15,
      "doc": null,
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [],
      "return_": [
        "u8"
      ]
    },
    "rarity_rare": {
      "source_index": 16,
      "index": 16,
      "doc": null,
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [],
      "return_": [
        "u8"
      ]
    },
    "rarity_epic": {
      "source_index": 17,
      "index": 17,
      "doc": null,
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [],
      "return_": [
        "u8"
      ]
    },
    "rarity_legendary": {
      "source_index": 18,
      "index": 18,
      "doc": null,
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [],
      "return_": [
        "u8"
      ]
    },
    "rarity_mythic": {
      "source_index": 19,
      "index": 19,
      "doc": null,
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [],
      "return_": [
        "u8"
      ]
    },
    "upgrade_rate": {
      "source_index": 20,
      "index": 20,
      "doc": " Get upgrade success rate for a rarity (out of 100)",
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "rarity",
          "type_": "u8"
        }
      ],
      "return_": [
        "u64"
      ]
    },
    "upgrade_rate_common_to_rare": {
      "source_index": 21,
      "index": 21,
      "doc": " Get upgrade rates for all rarities",
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [],
      "return_": [
        "u64"
      ]
    },
    "upgrade_rate_rare_to_epic": {
      "source_index": 22,
      "index": 22,
      "doc": null,
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [],
      "return_": [
        "u64"
      ]
    },
    "upgrade_rate_epic_to_legendary": {
      "source_index": 23,
      "index": 23,
      "doc": null,
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [],
      "return_": [
        "u64"
      ]
    },
    "upgrade_rate_legendary_to_mythic": {
      "source_index": 24,
      "index": 24,
      "doc": null,
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [],
      "return_": [
        "u64"
      ]
    },
    "rarity_name": {
      "source_index": 25,
      "index": 25,
      "doc": " Get rarity name as string",
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "rarity",
          "type_": "u8"
        }
      ],
      "return_": [
        {
          "Datatype": {
            "module": {
              "address": "std",
              "name": "string"
            },
            "name": "String",
            "type_arguments": []
          }
        }
      ]
    },
    "withdraw_treasury": {
      "source_index": 26,
      "index": 26,
      "doc": " Withdraw treasury balance (admin only - requires AdminCap in future)",
      "attributes": [],
      "visibility": "Public",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "treasury",
          "type_": {
            "Reference": [
              true,
              {
                "Datatype": {
                  "module": {
                    "address": "contract_v4",
                    "name": "gacha"
                  },
                  "name": "GachaTreasury",
                  "type_arguments": []
                }
              }
            ]
          }
        },
        {
          "name": "amount",
          "type_": "u64"
        },
        {
          "name": "ctx",
          "type_": {
            "Reference": [
              true,
              {
                "Datatype": {
                  "module": {
                    "address": "sui",
                    "name": "tx_context"
                  },
                  "name": "TxContext",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": [
        {
          "Datatype": {
            "module": {
              "address": "sui",
              "name": "coin"
            },
            "name": "Coin",
            "type_arguments": [
              {
                "phantom": true,
                "argument": {
                  "Datatype": {
                    "module": {
                      "address": "sui",
                      "name": "sui"
                    },
                    "name": "SUI",
                    "type_arguments": []
                  }
                }
              }
            ]
          }
        }
      ]
    }
  },
  "structs": {
    "GACHA": {
      "index": 0,
      "doc": null,
      "attributes": [],
      "abilities": [
        "Drop"
      ],
      "type_parameters": [],
      "fields": {
        "positional_fields": false,
        "fields": {
          "dummy_field": {
            "index": 0,
            "type_": "bool"
          }
        }
      }
    },
    "Card": {
      "index": 1,
      "doc": " NFT Card - the main collectible",
      "attributes": [],
      "abilities": [
        "Key",
        "Store"
      ],
      "type_parameters": [],
      "fields": {
        "positional_fields": false,
        "fields": {
          "id": {
            "index": 0,
            "doc": null,
            "type_": {
              "Datatype": {
                "module": {
                  "address": "sui",
                  "name": "object"
                },
                "name": "UID",
                "type_arguments": []
              }
            }
          },
          "value": {
            "index": 1,
            "doc": " Card value (0-9, corresponds to game cards)",
            "type_": "u8"
          },
          "rarity": {
            "index": 2,
            "doc": " Rarity type (0=Common, 1=Rare, 2=Epic, 3=Legendary, 4=Mythic)",
            "type_": "u8"
          },
          "wins": {
            "index": 3,
            "doc": " Number of wins with this card",
            "type_": "u64"
          },
          "games_played": {
            "index": 4,
            "doc": " Number of games played with this card",
            "type_": "u64"
          }
        }
      }
    },
    "GachaTreasury": {
      "index": 2,
      "doc": " Treasury to collect gacha fees",
      "attributes": [],
      "abilities": [
        "Key"
      ],
      "type_parameters": [],
      "fields": {
        "positional_fields": false,
        "fields": {
          "id": {
            "index": 0,
            "doc": null,
            "type_": {
              "Datatype": {
                "module": {
                  "address": "sui",
                  "name": "object"
                },
                "name": "UID",
                "type_arguments": []
              }
            }
          },
          "balance": {
            "index": 1,
            "doc": null,
            "type_": {
              "Datatype": {
                "module": {
                  "address": "sui",
                  "name": "balance"
                },
                "name": "Balance",
                "type_arguments": [
                  {
                    "phantom": true,
                    "argument": {
                      "Datatype": {
                        "module": {
                          "address": "sui",
                          "name": "sui"
                        },
                        "name": "SUI",
                        "type_arguments": []
                      }
                    }
                  }
                ]
              }
            }
          },
          "total_cards_minted": {
            "index": 2,
            "doc": null,
            "type_": "u64"
          }
        }
      }
    }
  },
  "enums": {}
}